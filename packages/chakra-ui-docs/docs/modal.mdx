import SEO from "../components/SEO";

<SEO
  title="Modal"
  description="A dialog is a window overlaid on either the primary window or another dialog window"
/>

See `CModal`'s <a href="https://github.com/chakra-ui/chakra-ui-vue/blob/master/packages/chakra-ui-core/src/CModal/accessibility.md">accessibility report</a>


# Modal

A dialog is a window overlaid on either the primary window or another dialog
window. Contents behind a modal dialog are **inert** meaning that users cannot
interact with content behind the dialog.

## Import

Chakra exports 8 components to help you create any modal dialog.

- `CModal`: The wrapper that provides context for its children
- `CModalOverlay`: The dimmed overlay behind the modal dialog
- `CModalContent`: The container for the modal dialog's content
- `CModalHeader`: The header that labels the modal dialog
- `CModalFooter`: The footer that houses the modal actions
- `CModalBody`: The wrapper that houses the modal's main content
- `CModalCloseButton`: The button that closes the modal.


```js
import {
  CModal,
  CModalOverlay,
  CModalContent,
  CModalHeader,
  CModalFooter,
  CModalBody,
  CModalCloseButton,
} from "@chakra-ui/vue";
```

## Usage

When the modal opens, focus is sent into the modal and set to the first tabbable
element. If there are no tabbled element, focus is set on the `CModalContent`.

```vue live=true
<template>
  <div>
    <c-button left-icon="check" mb="3" variant-color="blue" @click="open" variant="outline">Open Modal</c-button>
    <c-modal
      :is-open="isOpen"
      :on-close="close"
    >
      <c-modal-content ref="content">
        <c-modal-header>Modal Title</c-modal-header>
        <c-modal-close-button />
        <c-modal-body>
          <Lorem add="2s" />
        </c-modal-body>
        <c-modal-footer>
          <c-button variant-color="blue" mr="3">
            Save
          </c-button>
          <c-button @click="close">Cancel</c-button>
        </c-modal-footer>
      </c-modal-content>
      <c-modal-overlay />
    </c-modal>
  </div>
</template>

<script>
export default {
  data () {
    return {
      isOpen: false
    }
  },
  methods: {
    open() {
      this.isOpen = true
    },
    close() {
      this.isOpen = false
    }
  }
}
</script>
```

### Block Scrolling when Modal opens

For accessibility, it's recommended to block scrolling on the main document
behind the modal. Chakra does this by default but you can set
`blockScrollOnMount` to `false` to allow scrolling behind modal.

```vue live=true
<template>
  <div>
    <c-button left-icon="check" mb="3" variant-color="blue" @click="open" variant="outline">Open Modal</c-button>
    <c-modal
      :is-open="isOpen"
      :on-close="close"
      :block-scroll-on-mount="blockScrollOnMount"
    >
      <c-modal-content ref="content">
        <c-modal-header>Modal Title</c-modal-header>
        <c-modal-close-button />
        <c-modal-body>
          You can scroll the content behind the modal
        </c-modal-body>
        <c-modal-footer>
          <c-button variant-color="blue" mr="3">
            Close
          </c-button>
          <c-button @click="close">Secondary Action</c-button>
        </c-modal-footer>
      </c-modal-content>
      <c-modal-overlay />
    </c-modal>
  </div>
</template>

<script>
export default {
  data () {
    return {
      isOpen: false,
      blockScrollOnMount: false
    }
  },
  methods: {
    open() {
      this.isOpen = true
    },
    close() {
      this.isOpen = false
    }
  }
}
</script>
```

### Focus on specific element

Chakra automatically sets focus on the first tabbable element in the modal.
However, there might be scenarios where you need to manually control where focus
goes.

Chakra provides 2 props for this use-case:

- `initialFocusRef`: Accepts a `$ref` or a function that returns the `$ref` of the component that receives focus when the
  modal opens.
- `finalFocusRef`: Accepts a `$ref` or a function that returns the `$ref` of the component that receives focus when the modal
  closes.

> If you set `finalFocusRef`, internally we set `returnFocusOnClose` to `false`
> so it doesn't return focus to the element that triggered it.

```vue live=true
<template>
  <div>
    <c-button mr="3" @click="open">Open Modal</c-button>
    <c-button ref="finalRef">
      I'll receive focus on close
    </c-button>
    <c-modal
      :initial-focus-ref="() => $refs.initialRef"
      :final-focus-ref="() => $refs.finalRef"
      :is-open="isOpen"
      :on-close="close"
    >
      <c-modal-content ref="content">
        <c-modal-header>Create your account</c-modal-header>
        <c-modal-close-button />
        <c-modal-body>
          <c-form-control>
            <c-form-label>First name</c-form-label>
            <c-input ref="initialRef" placeholder="First name" />
          </c-form-control>

          <c-form-control mt="4">
            <c-form-label>Last name</c-form-label>
            <c-input placeholder="Last name" />
          </c-form-control>
        </c-modal-body>
        <c-modal-footer>
          <c-button variant-color="blue" mr="3">
            Cancel
          </c-button>
          <c-button @click="close">Save</c-button>
        </c-modal-footer>
      </c-modal-content>
      <c-modal-overlay />
    </c-modal>
  </div>
</template>

<script>
export default {
  data () {
    return {
      isOpen: false
    }
  },
  methods: {
    open() {
      this.isOpen = true
    },
    close() {
      this.isOpen = false
    }
  }
}
</script>
```

### Close Modal on Overlay Click

By default, the modal closes when you click it's overlay. You can set
`closeOnOverlayClick` to `false` if you want the modal to stay visible.

```vue live=true
<template>
  <div>
    <c-button variant-color="blue" @click="open">Open Modal</c-button>
    <c-modal
      :is-open="isOpen"
      :on-close="close"
      :closeOnOverlayClick="false"
    >
      <c-modal-content ref="content">
        <c-modal-header>Modal Title</c-modal-header>
        <c-modal-close-button />
        <c-modal-body>
          <Lorem add="2s" />
        </c-modal-body>
        <c-modal-footer>
          <c-button variant-color="blue" mr="3">
            Save
          </c-button>
          <c-button @click="close">Cancel</c-button>
        </c-modal-footer>
      </c-modal-content>
      <c-modal-overlay />
    </c-modal>
  </div>
</template>

<script>
export default {
  data () {
    return {
      isOpen: false
    }
  },
  methods: {
    open() {
      this.isOpen = true
    },
    close() {
      this.isOpen = false
    }
  }
}
</script>
```

### Make modal vertically centered

By default the modal has a vertical offset of `3.75rem` which you can change by
passing `top` to the `CModalContent`. If you need to vertically center the modal,
pass the `isCentered`

> If the content within the modal overflows beyond the viewport, don't use this
> prop. Try setting the [overflow behavior](#modal-overflow-behavior) instead

```vue live=true
<template>
  <div>
    <c-button variant-color="blue" @click="open">Open Modal</c-button>
    <c-modal
      :is-open="isOpen"
      :on-close="close"
      :closeOnOverlayClick="false"
    >
      <c-modal-content ref="content" is-centered>
        <c-modal-header>Modal Title</c-modal-header>
        <c-modal-close-button />
        <c-modal-body>
          <Lorem add="2s" />
        </c-modal-body>
        <c-modal-footer>
          <c-button @click="close">Cancel</c-button>
        </c-modal-footer>
      </c-modal-content>
      <c-modal-overlay />
    </c-modal>
  </div>
</template>

<script>
export default {
  data () {
    return {
      isOpen: false
    }
  },
  methods: {
    open() {
      this.isOpen = true
    },
    close() {
      this.isOpen = false
    }
  }
}
</script>
```